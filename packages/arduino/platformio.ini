; PlatformIO Project Configuration File
;
; Sistema de Riego Automatizado v3.0
; ESP32/ESP8266 + Firebase Firestore
;
; Configuración para múltiples entornos de compilación

; ============================================================================
; CONFIGURACIÓN COMÚN
; ============================================================================
[platformio]
default_envs = esp32dev

; ============================================================================
; ENTORNO: ESP32 (RECOMENDADO)
; ============================================================================
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Velocidad de monitor serial
monitor_speed = 115200

; Opciones de compilación
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

; Librerías requeridas
lib_deps = 
    mobizt/Firebase Arduino Client Library for ESP8266 and ESP32@^4.4.14
    bblanchon/ArduinoJson@^6.21.5

; Opciones de carga
upload_speed = 921600
upload_port = /dev/ttyUSB0  ; Cambiar según tu sistema
; Windows: COM3, COM4, etc.
; macOS: /dev/cu.usbserial-*
; Linux: /dev/ttyUSB0, /dev/ttyACM0

; Monitor serial
monitor_port = /dev/ttyUSB0  ; Cambiar según tu sistema
monitor_filters = 
    default
    time
    colorize

; ============================================================================
; ENTORNO: ESP8266 NodeMCU
; ============================================================================
[env:nodemcuv2]
platform = espressif8266
board = nodemcuv2
framework = arduino

monitor_speed = 115200

build_flags = 
    -DNDEBUG
    -DVTABLES_IN_FLASH
    -DPIO_FRAMEWORK_ARDUINO_LWIP2_LOW_MEMORY

lib_deps = 
    mobizt/Firebase Arduino Client Library for ESP8266 and ESP32@^4.4.14
    bblanchon/ArduinoJson@^6.21.5

upload_speed = 921600
upload_port = /dev/ttyUSB0

monitor_port = /dev/ttyUSB0
monitor_filters = 
    default
    time
    colorize

; ============================================================================
; ENTORNO: ESP32 DevKitC V4
; ============================================================================
[env:esp32-devkitc]
platform = espressif32
board = esp32-devkitc-v4
framework = arduino

monitor_speed = 115200

lib_deps = 
    mobizt/Firebase Arduino Client Library for ESP8266 and ESP32@^4.4.14
    bblanchon/ArduinoJson@^6.21.5

upload_speed = 921600

; ============================================================================
; ENTORNO: ESP8266 Wemos D1 Mini
; ============================================================================
[env:d1_mini]
platform = espressif8266
board = d1_mini
framework = arduino

monitor_speed = 115200

build_flags = 
    -DVTABLES_IN_FLASH

lib_deps = 
    mobizt/Firebase Arduino Client Library for ESP8266 and ESP32@^4.4.14
    bblanchon/ArduinoJson@^6.21.5

upload_speed = 921600

; ============================================================================
; ENTORNO: ESP32-S3 (Nueva generación)
; ============================================================================
[env:esp32-s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

monitor_speed = 115200

build_flags = 
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1

lib_deps = 
    mobizt/Firebase Arduino Client Library for ESP8266 and ESP32@^4.4.14
    bblanchon/ArduinoJson@^6.21.5

upload_speed = 921600

; ============================================================================
; NOTAS DE CONFIGURACIÓN
; ============================================================================
;
; SELECCIONAR ENTORNO:
; --------------------
; 1. Editar [platformio] default_envs con el nombre del entorno deseado
; 2. O compilar específico: pio run -e esp32dev
;
; PUERTOS SERIALES:
; -----------------
; - Actualizar upload_port y monitor_port según tu sistema
; - Para detectar: pio device list
;
; COMPILACIÓN:
; ------------
; - Compilar: pio run
; - Cargar: pio run --target upload
; - Monitor: pio device monitor
; - Todo junto: pio run --target upload && pio device monitor
;
; LIBRERÍAS:
; ----------
; - Actualizar: pio pkg update
; - Instalar: pio pkg install
;
; DEBUGGING:
; ----------
; - ESP32 soporta debugging con JTAG
; - Configurar debug_tool = esp-prog (requiere hardware adicional)
;
; ============================================================================
